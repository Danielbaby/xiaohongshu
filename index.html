<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="description" content="æƒ…ä¾£å®¿å‘½æ„Ÿæµ‹è¯• | æ˜Ÿç›˜æ·±åº¦åŒ¹é…ï¼Œè§£é”ä½ ä»¬çš„ç¼˜åˆ†å¯†ç ">
    <meta property="og:title" content="æƒ…ä¾£å®¿å‘½æ„Ÿæµ‹è¯• | æ˜Ÿç›˜æ·±åº¦åŒ¹é…">
    <meta property="og:description" content="æµ‹ä¸€æµ‹ä½ ä»¬çš„å®¿å‘½ç¼˜åˆ†æŒ‡æ•°ï¼Œè§£é”ä¸“å±çˆ±æƒ…å»ºè®®">
    <meta property="og:image" content="https://source.unsplash.com/random/800x600/?love,constellation">
    <meta property="og:type" content="website">
    <title>âœ¨ æƒ…ä¾£å®¿å‘½æ„Ÿæµ‹è¯• | æ˜Ÿç›˜æ·±åº¦åŒ¹é…</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'PingFang SC', 'Microsoft Yahei', sans-serif; }
        
        :root {
            --primary-color: #7928ca;
            --secondary-color: #ff0080;
            --accent-color: #00fff5;
            --bg-gradient: linear-gradient(135deg, #12c2e9 0%, #c471ed 50%, #f64f59 100%);
            --light-bg: rgba(255, 255, 255, 0.95);
            --shadow: 0 15px 35px rgba(121, 40, 202, 0.3);
        }
        
        body { 
            background: var(--bg-gradient); 
            min-height: 100vh; 
            padding: 20px;
            background-attachment: fixed;
            color: #333;
        }
        
        .container { 
            max-width: 600px; 
            margin: 0 auto; 
            background: var(--light-bg); 
            border-radius: 24px; 
            padding: 30px; 
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
        }
        
        h1 { 
            color: var(--primary-color); 
            text-align: center; 
            margin-bottom: 30px; 
            font-size: 1.8rem;
            font-weight: 700;
            text-shadow: 0 2px 10px rgba(121, 40, 202, 0.2);
            line-height: 1.4;
        }
        
        /* è¾“å…¥åŒºåŸŸæ ·å¼ */
        .input-group { margin-bottom: 20px; }
        .input-row { 
            display: flex; 
            gap: 15px; 
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        .input-row div { flex: 1; min-width: 140px; }
        
        label { 
            display: block; 
            color: #333; 
            margin-bottom: 8px; 
            font-weight: 500;
            font-size: 0.95rem;
        }
        
        input { 
            width: 100%; 
            padding: 14px 18px; 
            border: 2px solid #f0e6ff; 
            border-radius: 12px; 
            font-size: 1rem; 
            transition: all 0.3s;
            background: rgba(255, 255, 255, 0.8);
        }
        
        input[type="date"] {
            cursor: pointer;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='18' fill='%237928ca' viewBox='0 0 16 16'%3E%3Cpath d='M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z'/%3E%3Cpath d='M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 15px center;
            padding-right: 40px;
        }
        
        input:focus { 
            outline: none; 
            border-color: var(--primary-color); 
            box-shadow: 0 0 0 3px rgba(121, 40, 202, 0.1);
        }
        
        input.error { border-color: #ff4d4d; }
        
        .error-message {
            color: #ff4d4d;
            font-size: 0.75rem;
            margin-top: 5px;
            display: none;
        }
        
        .date-hint {
            color: #999;
            font-size: 0.75rem;
            margin-top: 5px;
        }
        
        /* æŒ‰é’®æ ·å¼ */
        button { 
            width: 100%; 
            padding: 16px; 
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color)); 
            color: white; 
            border: none; 
            border-radius: 12px; 
            font-size: 1.125rem; 
            cursor: pointer; 
            transition: all 0.3s;
            margin-top: 10px;
            font-weight: 500;
            box-shadow: 0 4px 15px rgba(121, 40, 202, 0.2);
        }
        
        button:hover { 
            transform: translateY(-3px); 
            box-shadow: 0 6px 20px rgba(121, 40, 202, 0.3);
        }
        
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        /* ç­”é¢˜åŒºåŸŸæ ·å¼ */
        #quiz-section {
            display: none;
            margin-top: 30px;
            animation: fadeIn 0.5s ease;
        }
        
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            color: var(--primary-color);
            font-weight: bold;
        }
        
        .quiz-progress-bar {
            height: 8px;
            background: #f0e6ff;
            border-radius: 4px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .quiz-progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            border-radius: 4px;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .quiz-card {
            background: linear-gradient(135deg, #fdf4ff 0%, #fef7fb 100%); 
            border-radius: 18px; 
            padding: 25px; 
            margin-bottom: 20px;
            border: 1px solid #f0e6ff;
        }
        
        .question {
            font-size: 1.25rem;
            color: #333;
            margin-bottom: 20px;
            line-height: 1.5;
            font-weight: 500;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .option {
            padding: 15px 20px;
            background: #fff;
            border: 2px solid #f0e6ff;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1rem;
        }
        
        .option:hover {
            border-color: var(--primary-color);
            background: #fdf4ff;
            transform: translateX(5px);
        }
        
        .option.selected {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            border-color: var(--primary-color);
            transform: translateX(5px);
        }
        
        .quiz-nav {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .quiz-nav button {
            flex: 1;
            padding: 14px;
            font-size: 1rem;
        }
        
        /* ç»“æœåŒºåŸŸæ ·å¼ */
        #result { 
            margin-top: 30px; 
            display: none; 
            animation: fadeIn 0.8s ease;
        }
        
        .result-card { 
            background: linear-gradient(135deg, #fdf4ff 0%, #fef7fb 100%); 
            border-radius: 18px; 
            padding: 25px; 
            margin-bottom: 20px;
            border: 1px solid #f0e6ff;
            position: relative;
        }
        
        .result-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
        }
        
        .result-title { 
            color: var(--primary-color); 
            font-size: 1.3rem; 
            margin-bottom: 15px; 
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .result-title::after {
            content: '';
            flex: 1;
            height: 1px;
            background: #eee;
        }
        
        .progress-bar { 
            height: 22px; 
            background: #f0e6ff; 
            border-radius: 11px; 
            margin: 10px 0; 
            overflow: hidden;
        }
        
        .progress-fill { 
            height: 100%; 
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color)); 
            border-radius: 11px; 
            transition: width 1.2s ease; 
            width: 0;
            box-shadow: 0 0 10px rgba(121, 40, 202, 0.3);
        }
        
        .percentage { 
            text-align: right; 
            color: var(--primary-color); 
            font-weight: 600; 
            margin-top: 5px;
            font-size: 1.1rem;
        }
        
        /* æ˜Ÿç›˜æ ·å¼ */
        .horoscope { 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            margin: 20px 0;
        }
        
        .horoscope-circle { 
            width: 200px; 
            height: 200px; 
            border-radius: 50%; 
            border: 10px solid;
            border-image: linear-gradient(to right, var(--primary-color), var(--secondary-color), var(--accent-color)) 1;
            position: relative; 
            display: flex; 
            justify-content: center; 
            align-items: center;
            background: radial-gradient(circle, rgba(255,253,255,0.9) 0%, rgba(255,248,253,0.6) 100%);
            box-shadow: 0 8px 30px rgba(121, 40, 202, 0.2);
            animation: rotateSlow 20s linear infinite;
        }
        
        .horoscope-inner { 
            width: 150px; 
            height: 150px; 
            border-radius: 50%; 
            background: #fff; 
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            align-items: center;
            box-shadow: inset 0 0 20px rgba(121, 40, 202, 0.1);
        }
        
        .constellation-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 1.1rem;
            color: #333;
        }
        
        .constellation-icon {
            font-size: 2.5rem;
            margin-bottom: 8px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 3px 6px rgba(121, 40, 202, 0.2));
        }
        
        .constellation-name {
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .heart-icon {
            font-size: 2rem;
            color: var(--secondary-color);
            margin: 8px 0;
            animation: pulse 2s infinite;
        }
        
        .love-percentage-desc {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 10px;
            line-height: 1.5;
        }
        
        /* è¿åŠ¿å¡ç‰‡æ ·å¼ */
        .fortune-card {
            background: linear-gradient(135deg, #f0f8fb 0%, #e8f4f8 100%);
            border-radius: 18px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #e0f2fe;
            position: relative;
        }
        
        .fortune-title {
            color: #4299e1;
            font-size: 1.2rem;
            margin-bottom: 15px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .fortune-content {
            color: #333;
            line-height: 1.6;
            font-size: 0.95rem;
        }
        
        .fortune-date {
            color: #999;
            font-size: 0.8rem;
            margin-top: 10px;
            text-align: right;
        }
        
        /* å»ºè®®åˆ—è¡¨æ ·å¼ */
        .advice-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .advice-list li {
            padding: 12px 15px;
            background: #fff;
            border-radius: 10px;
            margin-bottom: 10px;
            border-left: 4px solid var(--primary-color);
            box-shadow: 0 2px 8px rgba(121, 40, 202, 0.08);
            transition: transform 0.3s;
            line-height: 1.6;
        }
        
        .advice-list li:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(121, 40, 202, 0.12);
        }
        
        .advice-list li::before {
            content: 'âœ¨';
            margin-right: 8px;
            color: var(--secondary-color);
        }
        
        /* åˆ†äº«åŒºåŸŸæ ·å¼ */
        .share-section {
            margin-top: 20px;
            padding: 20px;
            background: linear-gradient(135deg, #f5fafe 0%, #eaf6fa 100%);
            border-radius: 18px;
            text-align: center;
        }
        
        .share-title {
            color: var(--primary-color);
            font-size: 1.1rem;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .share-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .share-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 10px 20px;
            background: #fff;
            border: 1px solid #eee;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
            min-width: 120px;
        }
        
        .share-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .share-icon {
            font-size: 1.2rem;
        }
        
        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        @keyframes rotateSlow {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* å“åº”å¼é€‚é… */
        @media (max-width: 480px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 1.5rem;
                margin-bottom: 20px;
            }
            
            .horoscope-circle {
                width: 160px;
                height: 160px;
            }
            
            .horoscope-inner {
                width: 120px;
                height: 120px;
            }
            
            .constellation-icon {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ’‘ æƒ…ä¾£å®¿å‘½æ„Ÿæµ‹è¯• | æ˜Ÿç›˜æ·±åº¦åŒ¹é…</h1>
        
        <!-- è¾“å…¥ä¿¡æ¯åŒºåŸŸ -->
        <div id="input-section" class="input-group">
            <div class="input-row">
                <div>
                    <label>ä½ çš„å§“å</label>
                    <input type="text" id="name1" placeholder="è¯·è¾“å…¥çœŸå®å§“åï¼ˆå¦‚ï¼šå¼ ä¸‰ï¼‰" oninput="validateNameRealTime('name1')">
                    <div id="name1-error" class="error-message">è¯·è¾“å…¥æœ‰æ•ˆçš„å§“åï¼ˆéœ€åŒ…å«æ±‰å­—/å­—æ¯ï¼Œ1-20å­—ç¬¦ï¼‰</div>
                </div>
                <div>
                    <label>ä½ çš„ç”Ÿæ—¥</label>
                    <input type="date" id="birthday1" max="" placeholder="é€‰æ‹©ç”Ÿæ—¥" onfocus="this.showPicker()" onchange="checkAge('birthday1')">
                    <div id="birthday1-error" class="error-message">å¹´é¾„å¿…é¡»å¹´æ»¡12å²ï¼Œä¸”ä¸èƒ½é€‰æ‹©æœªæ¥æ—¥æœŸ</div>
                    <div class="date-hint">æ ¼å¼ï¼šYYYY-MM-DDï¼ˆä¾‹å¦‚ï¼š2000-01-01ï¼‰</div>
                </div>
            </div>
            
            <div class="input-row">
                <div>
                    <label>TAçš„å§“å</label>
                    <input type="text" id="name2" placeholder="è¯·è¾“å…¥TAçš„çœŸå®å§“åï¼ˆå¦‚ï¼šæå››ï¼‰" oninput="validateNameRealTime('name2')">
                    <div id="name2-error" class="error-message">è¯·è¾“å…¥æœ‰æ•ˆçš„å§“åï¼ˆéœ€åŒ…å«æ±‰å­—/å­—æ¯ï¼Œ1-20å­—ç¬¦ï¼‰</div>
                </div>
                <div>
                    <label>TAçš„ç”Ÿæ—¥</label>
                    <input type="date" id="birthday2" max="" placeholder="é€‰æ‹©ç”Ÿæ—¥" onfocus="this.showPicker()" onchange="checkAge('birthday2')">
                    <div id="birthday2-error" class="error-message">å¹´é¾„å¿…é¡»å¹´æ»¡12å²ï¼Œä¸”ä¸èƒ½é€‰æ‹©æœªæ¥æ—¥æœŸ</div>
                    <div class="date-hint">æ ¼å¼ï¼šYYYY-MM-DDï¼ˆä¾‹å¦‚ï¼š2000-01-01ï¼‰</div>
                </div>
            </div>
            
            <button onclick="startQuiz()">å¼€å§‹å®¿å‘½æµ‹è¯•</button>
        </div>
        
        <!-- ç­”é¢˜åŒºåŸŸ -->
        <div id="quiz-section">
            <div class="quiz-header">
                <span>é¢˜ç›® <span id="current-question">1</span>/30</span>
                <span id="progress-percent">3%</span>
            </div>
            
            <div class="quiz-progress-bar">
                <div id="quiz-progress-fill" class="quiz-progress-fill"></div>
            </div>
            
            <div class="quiz-card">
                <div class="question" id="question-text">åŠ è½½é¢˜ç›®ä¸­...</div>
                <div class="options" id="options-container"></div>
            </div>
            
            <div class="quiz-nav">
                <button id="prev-btn" onclick="prevQuestion()">ä¸Šä¸€é¢˜</button>
                <button id="next-btn" onclick="nextQuestion()" style="display: none;">ä¸‹ä¸€é¢˜</button>
                <button id="submit-btn" onclick="calculateResult()" style="display: none;">æŸ¥çœ‹ç»“æœ</button>
            </div>
        </div>
        
        <!-- ç»“æœåŒºåŸŸ -->
        <div id="result">
            <div class="result-card">
                <div class="result-title">ç¼˜åˆ†å æ¯”</div>
                <div id="lovePercentageText"></div>
                <div id="lovePercentageDesc" class="love-percentage-desc"></div>
                <div class="progress-bar">
                    <div id="loveProgress" class="progress-fill"></div>
                </div>
                <div class="percentage" id="lovePercent"></div>
            </div>
            
            <div class="result-card">
                <div class="result-title">æ˜Ÿç›˜åŒ¹é…åº¦</div>
                <div class="horoscope">
                    <div class="horoscope-circle">
                        <div class="horoscope-inner">
                            <div id="constellation1" class="constellation-item"></div>
                            <div class="heart-icon">â¤</div>
                            <div id="constellation2" class="constellation-item"></div>
                        </div>
                    </div>
                </div>
                <div id="matchDegreeText"></div>
                <div class="progress-bar">
                    <div id="matchProgress" class="progress-fill"></div>
                </div>
                <div class="percentage" id="matchPercent"></div>
            </div>
            
            <!-- è¿åŠ¿å¡ç‰‡ -->
            <div class="fortune-card">
                <div class="fortune-title">ğŸ”® ä»Šæ—¥åŒäººè¿åŠ¿</div>
                <div class="fortune-content" id="todayFortune"></div>
                <div class="fortune-date" id="fortuneDate"></div>
            </div>
            
            <div class="fortune-card">
                <div class="fortune-title">ğŸŒŸ æœ¬å‘¨çˆ±æƒ…æŒ‡å¼•</div>
                <div class="fortune-content" id="weekFortune"></div>
            </div>
            
            <div class="result-card">
                <div class="result-title">ä½ ä»¬çš„æ‹çˆ±ç‰¹è´¨</div>
                <div id="love-traits" style="color: #555; line-height: 1.6;"></div>
            </div>
            
            <div class="result-card">
                <div class="result-title">å®¿å‘½æ‹çˆ±å»ºè®®</div>
                <ul class="advice-list" id="adviceList"></ul>
            </div>
            
            <!-- åˆ†äº«åŒºåŸŸ -->
            <div class="share-section">
                <div class="share-title">ğŸ’– åˆ†äº«ä½ ä»¬çš„ç¼˜åˆ†ç»“æœ</div>
                <div class="share-buttons">
                    <div class="share-btn" onclick="shareToWechat()">
                        <span class="share-icon">ğŸ“±</span>
                        <span>å¾®ä¿¡å¥½å‹</span>
                    </div>
                    <div class="share-btn" onclick="shareToMoments()">
                        <span class="share-icon">ğŸ“–</span>
                        <span>æœ‹å‹åœˆ</span>
                    </div>
                    <div class="share-btn" onclick="copyResultLink()">
                        <span class="share-icon">ğŸ”—</span>
                        <span>å¤åˆ¶é“¾æ¥</span>
                    </div>
                </div>
            </div>
            
            <button onclick="restartTest()" style="margin-top: 20px;">é‡æ–°æµ‹è¯•</button>
        </div>
    </div>

    <script>
        // è®¾ç½®æœ€å¤§æ—¥æœŸä¸ºä»Šå¤©
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('birthday1').max = today;
            document.getElementById('birthday2').max = today;
        });

        // æ˜Ÿåº§æ•°æ®
        const constellationData = {
            "ç™½ç¾Šåº§": { icon: "â™ˆ", element: "ç«", traits: ["çƒ­æƒ…", "å†²åŠ¨", "å‹‡æ•¢", "ç›´æ¥"] },
            "é‡‘ç‰›åº§": { icon: "â™‰", element: "åœŸ", traits: ["ç¨³é‡", "å›ºæ‰§", "åŠ¡å®", "å¿ è¯š"] },
            "åŒå­åº§": { icon: "â™Š", element: "é£", traits: ["çµæ´»", "å–„å˜", "èªæ˜", "æ²Ÿé€š"] },
            "å·¨èŸ¹åº§": { icon: "â™‹", element: "æ°´", traits: ["æ•æ„Ÿ", "é¡¾å®¶", "æƒ…ç»ªåŒ–", "ä¿æŠ¤"] },
            "ç‹®å­åº§": { icon: "â™Œ", element: "ç«", traits: ["è‡ªä¿¡", "æ…·æ…¨", "éª„å‚²", "é¢†å¯¼åŠ›"] },
            "å¤„å¥³åº§": { icon: "â™", element: "åœŸ", traits: ["ç»†è‡´", "æŒ‘å‰”", "åˆ†æ", "æœåŠ¡"] },
            "å¤©ç§¤åº§": { icon: "â™", element: "é£", traits: ["å’Œè°", "çŠ¹è±«", "çˆ±ç¾", "å…¬æ­£"] },
            "å¤©èåº§": { icon: "â™", element: "æ°´", traits: ["ç¥ç§˜", "æ‰§ç€", "ç›´è§‰", "åŠ›é‡"] },
            "å°„æ‰‹åº§": { icon: "â™", element: "ç«", traits: ["ä¹è§‚", "è‡ªç”±", "å†’é™©", "å“²å­¦"] },
            "æ‘©ç¾¯åº§": { icon: "â™‘", element: "åœŸ", traits: ["è¸å®", "ä¸¥è‚ƒ", "é‡å¿ƒ", "è‡ªå¾‹"] },
            "æ°´ç“¶åº§": { icon: "â™’", element: "é£", traits: ["åˆ›æ–°", "ç‹¬ç«‹", "äººé“", "å›é€†"] },
            "åŒé±¼åº§": { icon: "â™“", element: "æ°´", traits: ["æ¢¦å¹»", "å–„è‰¯", "ç›´è§‰", "ç‰ºç‰²"] }
        };

        // éªŒè¯å§“å
        function validateNameRealTime(id) {
            const input = document.getElementById(id);
            const error = document.getElementById(id + '-error');
            const nameRegex = /^[\u4e00-\u9fa5a-zA-Z]{1,20}$/;
            
            if (!nameRegex.test(input.value.trim())) {
                input.classList.add('error');
                error.style.display = 'block';
                return false;
            } else {
                input.classList.remove('error');
                error.style.display = 'none';
                return true;
            }
        }

        // æ£€æŸ¥å¹´é¾„
        function checkAge(id) {
            const input = document.getElementById(id);
            const error = document.getElementById(id + '-error');
            const birthday = new Date(input.value);
            const today = new Date();
            const minAgeDate = new Date();
            minAgeDate.setFullYear(minAgeDate.getFullYear() - 12);
            
            if (birthday > today || birthday > minAgeDate) {
                input.classList.add('error');
                error.style.display = 'block';
                return false;
            } else {
                input.classList.remove('error');
                error.style.display = 'none';
                return true;
            }
        }

        // å¼€å§‹æµ‹è¯•
        function startQuiz() {
            const name1Valid = validateNameRealTime('name1');
            const name2Valid = validateNameRealTime('name2');
            const birthday1Valid = checkAge('birthday1');
            const birthday2Valid = checkAge('birthday2');
            
            if (name1Valid && name2Valid && birthday1Valid && birthday2Valid) {
                document.getElementById('input-section').style.display = 'none';
                document.getElementById('quiz-section').style.display = 'block';
                
                // ä¿å­˜ç”¨æˆ·ä¿¡æ¯
                userInfo = {
                    name1: document.getElementById('name1').value,
                    name2: document.getElementById('name2').value,
                    birthday1: document.getElementById('birthday1').value,
                    birthday2: document.getElementById('birthday2').value
                };
                
                // åˆå§‹åŒ–æµ‹è¯•
                initQuiz();
            } else {
                alert('è¯·æ­£ç¡®å¡«å†™æ‰€æœ‰ä¿¡æ¯');
            }
        }

        // åˆå§‹åŒ–æµ‹è¯•
        function initQuiz() {
            currentQuestionIndex = 0;
            userAnswers = [];
            
            // ä»é¢˜åº“ä¸­éšæœºé€‰æ‹©29é¢˜ï¼ˆæ’é™¤ç¬¬ä¸€é¢˜ï¼‰
            const shuffledQuestions = [...fullQuizBank];
            // å›ºå®šç¬¬ä¸€é¢˜
            const firstQuestion = shuffledQuestions[0];
            
            // æ‰“ä¹±å‰©ä½™é¢˜ç›®
            for (let i = shuffledQuestions.length - 1; i > 1; i--) {
                const j = Math.floor(Math.random() * (i - 1)) + 1;
                [shuffledQuestions[i], shuffledQuestions[j]] = [shuffledQuestions[j], shuffledQuestions[i]];
            }
            
            // é€‰æ‹©å‰30é¢˜ï¼ˆç¬¬ä¸€é¢˜å›ºå®šï¼Œå…¶ä½™29é¢˜éšæœºï¼‰
            quizQuestions = [firstQuestion, ...shuffledQuestions.slice(1, 30)];
            
            loadQuestion();
            updateProgress();
        }

        // åŠ è½½é¢˜ç›®
        function loadQuestion() {
            const question = quizQuestions[currentQuestionIndex];
            document.getElementById('question-text').textContent = question.question;
            
            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.textContent = option;
                optionElement.onclick = () => selectOption(index);
                optionsContainer.appendChild(optionElement);
            });
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.getElementById('prev-btn').disabled = currentQuestionIndex === 0;
            
            // éšè—ä¸‹ä¸€é¢˜å’Œæäº¤æŒ‰é’®ï¼Œä½¿ç”¨è‡ªåŠ¨è·³è½¬
            document.getElementById('next-btn').style.display = 'none';
            document.getElementById('submit-btn').style.display = 'none';
        }

        // é€‰æ‹©é€‰é¡¹ - ä¿®æ”¹ä¸ºç«‹å³è·³è½¬
        function selectOption(index) {
            const options = document.querySelectorAll('.option');
            options.forEach(option => {
                option.classList.remove('selected');
            });
            
            options[index].classList.add('selected');
            
            userAnswers[currentQuestionIndex] = index;
            
            // ç«‹å³è·³è½¬åˆ°ä¸‹ä¸€é¢˜æˆ–æäº¤
            if (currentQuestionIndex < quizQuestions.length - 1) {
                // ä¸æ˜¯æœ€åä¸€é¢˜ï¼Œç«‹å³è·³è½¬åˆ°ä¸‹ä¸€é¢˜
                currentQuestionIndex++;
                loadQuestion();
                updateProgress();
            } else {
                // æœ€åä¸€é¢˜ï¼Œç«‹å³æäº¤
                calculateResult();
            }
        }

        // ä¸Šä¸€é¢˜
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
                updateProgress();
                
                // æ¢å¤ä¹‹å‰çš„é€‰æ‹©
                if (userAnswers[currentQuestionIndex] !== undefined) {
                    const options = document.querySelectorAll('.option');
                    options[userAnswers[currentQuestionIndex]].classList.add('selected');
                }
            }
        }

        // ä¸‹ä¸€é¢˜
        function nextQuestion() {
            if (currentQuestionIndex < quizQuestions.length - 1 && userAnswers[currentQuestionIndex] !== undefined) {
                currentQuestionIndex++;
                loadQuestion();
                updateProgress();
                
                // æ¢å¤ä¹‹å‰çš„é€‰æ‹©
                if (userAnswers[currentQuestionIndex] !== undefined) {
                    const options = document.querySelectorAll('.option');
                    options[userAnswers[currentQuestionIndex]].classList.add('selected');
                }
            }
        }

        // æ›´æ–°è¿›åº¦
        function updateProgress() {
            const progress = ((currentQuestionIndex + 1) / quizQuestions.length) * 100;
            document.getElementById('quiz-progress-fill').style.width = progress + '%';
            document.getElementById('current-question').textContent = currentQuestionIndex + 1;
            document.getElementById('progress-percent').textContent = Math.round(progress) + '%';
        }

        // è®¡ç®—ç»“æœ
        function calculateResult() {
            if (userAnswers.length !== quizQuestions.length) {
                alert('è¯·å®Œæˆæ‰€æœ‰é¢˜ç›®');
                return;
            }
            
            document.getElementById('quiz-section').style.display = 'none';
            document.getElementById('result').style.display = 'block';
            
            // è®¡ç®—å¾—åˆ†
            let totalScore = 0;
            let maxScore = 0;
            
            userAnswers.forEach((answer, index) => {
                const question = quizQuestions[index];
                totalScore += question.weight[answer];
                maxScore += Math.max(...question.weight);
            });
            
            const lovePercentage = Math.round((totalScore / maxScore) * 100);
            
            // æ˜¾ç¤ºç»“æœ
            displayResults(lovePercentage);
        }

        // æ˜¾ç¤ºç»“æœ
        function displayResults(lovePercentage) {
            // ç¼˜åˆ†å æ¯”
            document.getElementById('lovePercent').textContent = lovePercentage + '%';
            document.getElementById('loveProgress').style.width = lovePercentage + '%';
            
            let loveText = '';
            let loveDesc = '';
            
            if (lovePercentage >= 90) {
                loveText = 'å¤©ç”Ÿä¸€å¯¹ï¼ä½ ä»¬çš„ç¼˜åˆ†æŒ‡æ•°çˆ†è¡¨';
                loveDesc = 'ä½ ä»¬æ˜¯å½¼æ­¤å‘½ä¸­æ³¨å®šçš„çµé­‚ä¼´ä¾£ï¼Œé»˜å¥‘åè¶³ï¼Œç›¸å¤„èæ´½';
            } else if (lovePercentage >= 80) {
                loveText = 'éå¸¸åŒ¹é…ï¼ä½ ä»¬çš„ç¼˜åˆ†å¾ˆæ·±';
                loveDesc = 'ä½ ä»¬æœ‰ç€å¾ˆå¥½çš„æ„Ÿæƒ…åŸºç¡€ï¼Œç›¸å¤„æ„‰å¿«ï¼Œæœªæ¥å‘å±•æ½œåŠ›å·¨å¤§';
            } else if (lovePercentage >= 70) {
                loveText = 'æ¯”è¾ƒåŒ¹é…ï¼ç¼˜åˆ†ä¸é”™';
                loveDesc = 'ä½ ä»¬æœ‰å¾ˆå¤šå…±åŒç‚¹ï¼Œç›¸å¤„èæ´½ï¼Œéœ€è¦æ›´å¤šæ—¶é—´ç£¨åˆ';
            } else if (lovePercentage >= 60) {
                loveText = 'ä¸€èˆ¬åŒ¹é…ï¼ç¼˜åˆ†å°šå¯';
                loveDesc = 'ä½ ä»¬æœ‰å‘å±•çš„å¯èƒ½æ€§ï¼Œä½†éœ€è¦åŒæ–¹å…±åŒåŠªåŠ›ç»è¥';
            } else {
                loveText = 'éœ€è¦åŠªåŠ›ï¼ç¼˜åˆ†æœ‰å¾…æå‡';
                loveDesc = 'ä½ ä»¬åœ¨ç›¸å¤„ä¸­å¯èƒ½ä¼šé‡åˆ°ä¸€äº›æŒ‘æˆ˜ï¼Œéœ€è¦æ›´å¤šç†è§£å’ŒåŒ…å®¹';
            }
            
            document.getElementById('lovePercentageText').textContent = loveText;
            document.getElementById('lovePercentageDesc').textContent = loveDesc;
            
            // æ˜Ÿåº§åŒ¹é…
            const constellation1 = getConstellation(userInfo.birthday1);
            const constellation2 = getConstellation(userInfo.birthday2);
            
            document.getElementById('constellation1').innerHTML = 
                `<div class="constellation-icon">${constellationData[constellation1].icon}</div>
                 <div class="constellation-name">${constellation1}</div>`;
            
            document.getElementById('constellation2').innerHTML = 
                `<div class="constellation-icon">${constellationData[constellation2].icon}</div>
                 <div class="constellation-name">${constellation2}</div>`;
            
            // è®¡ç®—æ˜Ÿåº§åŒ¹é…åº¦
            const matchPercentage = calculateConstellationMatch(constellation1, constellation2);
            document.getElementById('matchPercent').textContent = matchPercentage + '%';
            document.getElementById('matchProgress').style.width = matchPercentage + '%';
            
            let matchText = '';
            if (matchPercentage >= 90) {
                matchText = 'æ˜Ÿåº§ç»é…ï¼ä½ ä»¬çš„æ˜Ÿç›˜é«˜åº¦å¥‘åˆ';
            } else if (matchPercentage >= 80) {
                matchText = 'æ˜Ÿåº§å¾ˆé…ï¼æ˜Ÿç›˜ç›¸äº’å¸å¼•';
            } else if (matchPercentage >= 70) {
                matchText = 'æ˜Ÿåº§è¾ƒé…ï¼æ˜Ÿç›˜æœ‰è‰¯å¥½äº’åŠ¨';
            } else if (matchPercentage >= 60) {
                matchText = 'æ˜Ÿåº§ä¸€èˆ¬ï¼æ˜Ÿç›˜éœ€è¦è°ƒå’Œ';
            } else {
                matchText = 'æ˜Ÿåº§æŒ‘æˆ˜ï¼æ˜Ÿç›˜éœ€è¦æ›´å¤šç£¨åˆ';
            }
            document.getElementById('matchDegreeText').textContent = matchText;
            
            // è¿åŠ¿å’Œå»ºè®®
            displayFortuneAndAdvice(constellation1, constellation2, lovePercentage);
        }

        // æ ¹æ®ç”Ÿæ—¥è·å–æ˜Ÿåº§
        function getConstellation(birthday) {
            const date = new Date(birthday);
            const month = date.getMonth() + 1;
            const day = date.getDate();
            
            if ((month === 3 && day >= 21) || (month === 4 && day <= 19)) return "ç™½ç¾Šåº§";
            if ((month === 4 && day >= 20) || (month === 5 && day <= 20)) return "é‡‘ç‰›åº§";
            if ((month === 5 && day >= 21) || (month === 6 && day <= 21)) return "åŒå­åº§";
            if ((month === 6 && day >= 22) || (month === 7 && day <= 22)) return "å·¨èŸ¹åº§";
            if ((month === 7 && day >= 23) || (month === 8 && day <= 22)) return "ç‹®å­åº§";
            if ((month === 8 && day >= 23) || (month === 9 && day <= 22)) return "å¤„å¥³åº§";
            if ((month === 9 && day >= 23) || (month === 10 && day <= 23)) return "å¤©ç§¤åº§";
            if ((month === 10 && day >= 24) || (month === 11 && day <= 22)) return "å¤©èåº§";
            if ((month === 11 && day >= 23) || (month === 12 && day <= 21)) return "å°„æ‰‹åº§";
            if ((month === 12 && day >= 22) || (month === 1 && day <= 19)) return "æ‘©ç¾¯åº§";
            if ((month === 1 && day >= 20) || (month === 2 && day <= 18)) return "æ°´ç“¶åº§";
            return "åŒé±¼åº§";
        }

        // è®¡ç®—æ˜Ÿåº§åŒ¹é…åº¦
        function calculateConstellationMatch(constellation1, constellation2) {
            // ç®€åŒ–ç‰ˆæ˜Ÿåº§åŒ¹é…ç®—æ³•
            const elements = {
                "ç«": ["ç«", "é£"],
                "åœŸ": ["åœŸ", "æ°´"], 
                "é£": ["é£", "ç«"],
                "æ°´": ["æ°´", "åœŸ"]
            };
            
            const element1 = constellationData[constellation1].element;
            const element2 = constellationData[constellation2].element;
            
            if (element1 === element2) return 85;
            if (elements[element1].includes(element2)) return 75;
            return 65;
        }

        // æ˜¾ç¤ºè¿åŠ¿å’Œå»ºè®®
        function displayFortuneAndAdvice(constellation1, constellation2, lovePercentage) {
            // ä»Šæ—¥è¿åŠ¿
            const fortunes = [
                "ä»Šå¤©é€‚åˆä¸€èµ·è§„åˆ’æœªæ¥ï¼Œä½ ä»¬çš„æƒ³æ³•ä¼šå¾ˆé»˜å¥‘",
                "æ„Ÿæƒ…è¿åŠ¿ä¸Šå‡ï¼Œé€‚åˆè¡¨è¾¾å†…å¿ƒçœŸå®æ„Ÿå—",
                "ä¸€èµ·å°è¯•æ–°äº‹ç‰©ä¼šè®©æ„Ÿæƒ…æ›´åŠ ç”œèœœ",
                "æ²Ÿé€šæ˜¯ä»Šå¤©çš„å…³é”®ï¼Œå¤šå€¾å¬å¯¹æ–¹çš„æƒ³æ³•",
                "å°å°çš„æƒŠå–œä¼šè®©æ„Ÿæƒ…æ›´åŠ å‡æ¸©",
                "ä»Šå¤©é€‚åˆå›é¡¾ç¾å¥½å›å¿†ï¼Œå¢è¿›æ„Ÿæƒ…"
            ];
            
            document.getElementById('todayFortune').textContent = 
                fortunes[Math.floor(Math.random() * fortunes.length)];
            
            // æœ¬å‘¨æŒ‡å¼•
            const guides = [
                "æœ¬å‘¨å¤šå®‰æ’å…±åŒæ´»åŠ¨ï¼ŒåŠ å¼ºæƒ…æ„Ÿè¿æ¥",
                "å…³æ³¨å½¼æ­¤çš„æƒ…æ„Ÿéœ€æ±‚ï¼ŒåŠæ—¶ç»™äºˆæ”¯æŒ",
                "å°è¯•æ–°çš„ç›¸å¤„æ¨¡å¼ï¼Œç»™æ„Ÿæƒ…æ³¨å…¥æ–°é²œæ„Ÿ",
                "æœ¬å‘¨é€‚åˆæ·±å…¥æ²Ÿé€šï¼Œè§£å†³æ½œåœ¨é—®é¢˜",
                "å¤šåˆ›é€ æµªæ¼«æ—¶åˆ»ï¼Œä¿æŒçˆ±æƒ…çš„ç”œèœœåº¦"
            ];
            
            document.getElementById('weekFortune').textContent = 
                guides[Math.floor(Math.random() * guides.length)];
            
            // æ‹çˆ±ç‰¹è´¨
            const traits1 = constellationData[constellation1].traits.slice(0, 2).join('ã€');
            const traits2 = constellationData[constellation2].traits.slice(0, 2).join('ã€');
            document.getElementById('love-traits').innerHTML = 
                `<strong>${userInfo.name1} (${constellation1})</strong>: ${traits1}<br>
                 <strong>${userInfo.name2} (${constellation2})</strong>: ${traits2}`;
            
            // æ‹çˆ±å»ºè®®
            const adviceList = document.getElementById('adviceList');
            const advices = [
                "ä¿æŒç»å¸¸çš„æ²Ÿé€šï¼Œåˆ†äº«å½¼æ­¤çš„æƒ³æ³•å’Œæ„Ÿå—",
                "å°Šé‡å½¼æ­¤çš„ç‹¬ç«‹æ€§ï¼Œç»™å½¼æ­¤é€‚å½“çš„ç©ºé—´",
                "åŸ¹å…»å…±åŒçˆ±å¥½ï¼Œåˆ›é€ æ›´å¤šç¾å¥½å›å¿†",
                "å­¦ä¼šåŒ…å®¹å’Œç†è§£ï¼Œæ¥çº³å½¼æ­¤çš„ä¸å®Œç¾",
                "å®šæœŸå®‰æ’çº¦ä¼šï¼Œä¿æŒçˆ±æƒ…çš„æ–°é²œæ„Ÿ",
                "ç›¸äº’æ”¯æŒæˆé•¿ï¼Œæˆä¸ºæ›´å¥½çš„è‡ªå·±"
            ];
            
            advices.forEach(advice => {
                const li = document.createElement('li');
                li.textContent = advice;
                adviceList.appendChild(li);
            });
            
            // è¿åŠ¿æ—¥æœŸ
            document.getElementById('fortuneDate').textContent = 
                'æ›´æ–°äº: ' + new Date().toLocaleDateString();
        }

        // åˆ†äº«åŠŸèƒ½
        function shareToWechat() {
            alert('è¯·ä½¿ç”¨å¾®ä¿¡æ‰«æäºŒç»´ç åˆ†äº«ç»™å¥½å‹');
        }

        function shareToMoments() {
            alert('è¯·ä½¿ç”¨å¾®ä¿¡åˆ†äº«åˆ°æœ‹å‹åœˆ');
        }

        function copyResultLink() {
            navigator.clipboard.writeText(window.location.href).then(() => {
                alert('é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
            });
        }

        // é‡æ–°æµ‹è¯•
        function restartTest() {
            document.getElementById('result').style.display = 'none';
            document.getElementById('input-section').style.display = 'block';
            
            // æ¸…ç©ºè¡¨å•
            document.getElementById('name1').value = '';
            document.getElementById('name2').value = '';
            document.getElementById('birthday1').value = '';
            document.getElementById('birthday2').value = '';
            
            currentQuestionIndex = 0;
            userAnswers = [];
            userInfo = {};
        }

        // ç”Ÿæˆ500+é¢˜åº“
        const generateQuestionBank = () => {
            const baseQuestions = [
                { question: "ä½ ä»¬ç¬¬ä¸€æ¬¡è§é¢çš„åœºæ™¯æ˜¯ï¼Ÿ", options: ["æœ‹å‹ä»‹ç»", "å¶ç„¶ç›¸é‡", "å·¥ä½œ/å­¦ä¹ åœºåˆ", "çº¿ä¸Šè®¤è¯†"], weight: [90, 100, 80, 70] },
                { question: "ä½ ä»¬åµæ¶åé€šå¸¸å¦‚ä½•å’Œè§£ï¼Ÿ", options: ["ä¸»åŠ¨é“æ­‰", "å†·é™åæ²Ÿé€š", "éœ€è¦ç¬¬ä¸‰æ–¹è°ƒè§£", "è‡ªç„¶å’Œå¥½"], weight: [85, 100, 70, 90] },
                { question: "ä½ ä»¬çš„æ€§æ ¼æ›´æ¥è¿‘ï¼Ÿ", options: ["éƒ½å¤–å‘å¼€æœ—", "éƒ½å†…å‘æ²‰ç¨³", "äº’è¡¥å‹", "æ—¶è€Œç›¸ä¼¼æ—¶è€Œäº’è¡¥"], weight: [75, 70, 100, 85] },
                { question: "ä½ ä»¬çš„å…±åŒçˆ±å¥½æœ‰å¤šå°‘ï¼Ÿ", options: ["å‡ ä¹ç›¸åŒ", "å¤§éƒ¨åˆ†ç›¸ä¼¼", "å„æœ‰ç‰¹è‰²", "å®Œå…¨ä¸åŒ"], weight: [85, 100, 80, 65] },
                { question: "ä½ ä»¬å¯¹æœªæ¥çš„è§„åˆ’ï¼Ÿ", options: ["é«˜åº¦ä¸€è‡´", "åŸºæœ¬ä¸€è‡´", "æœ‰åˆ†æ­§ä½†å¯åè°ƒ", "å·®å¼‚è¾ƒå¤§"], weight: [100, 90, 75, 60] },
                { question: "ä½ ä»¬çš„ç›¸å¤„æ¨¡å¼æ›´åƒï¼Ÿ", options: ["é»äººå‹", "ç‹¬ç«‹å‹", "å¹³è¡¡å‹", "éšç¼˜å‹"], weight: [70, 65, 100, 80] },
                { question: "ä½ ä»¬æœ€å¸¸å› ä¸ºä»€ä¹ˆäº§ç”Ÿåˆ†æ­§ï¼Ÿ", options: ["ç”Ÿæ´»ä¹ æƒ¯", "ä»·å€¼è§‚", "æ¶ˆè´¹è§‚å¿µ", "å¾ˆå°‘åˆ†æ­§"], weight: [75, 60, 70, 100] },
                { question: "ä½ ä»¬çš„çˆ±æƒ…è§‚æ˜¯ï¼Ÿ", options: ["æµªæ¼«è‡³ä¸Š", "ç°å®åŠ¡å®", "å…±åŒæˆé•¿", "é¡ºå…¶è‡ªç„¶"], weight: [85, 75, 100, 80] },
                { question: "ä½ ä»¬çš„æ²Ÿé€šæ–¹å¼ï¼Ÿ", options: ["æ— è¯ä¸è°ˆ", "æœ‰ä¿ç•™ä½†å¦è¯š", "éœ€è¦æ—¶æ‰æ²Ÿé€š", "æœ‰æ—¶ä¼šæœ‰éš”é˜‚"], weight: [100, 90, 70, 60] },
                { question: "ä½ ä»¬çš„é»˜å¥‘ç¨‹åº¦ï¼Ÿ", options: ["å¿ƒæœ‰çµçŠ€", "æ¯”è¾ƒé»˜å¥‘", "ä¸€èˆ¬èˆ¬", "éœ€è¦è¯´æ˜"], weight: [100, 90, 75, 60] },
                { question: "ä½ ä»¬å¤„ç†å‹åŠ›çš„æ–¹å¼ï¼Ÿ", options: ["äº’ç›¸æ”¯æŒ", "å„è‡ªå¤„ç†", "ä¸€èµ·æ”¾æ¾", "éœ€è¦ç‹¬å¤„ç©ºé—´"], weight: [100, 70, 90, 80] },
                { question: "ä½ ä»¬å¯¹æ„Ÿæƒ…çš„æŠ•å…¥ç¨‹åº¦ï¼Ÿ", options: ["åŒæ–¹éƒ½å¾ˆæŠ•å…¥", "ä¸€æ–¹æ›´ä¸»åŠ¨", "æ¯”è¾ƒå‡è¡¡", "çœ‹æƒ…å†µ"], weight: [100, 80, 90, 70] },
                { question: "ä½ ä»¬çš„å®¶åº­èƒŒæ™¯å·®å¼‚ï¼Ÿ", options: ["ç›¸ä¼¼", "ç•¥æœ‰å·®å¼‚", "å·®å¼‚è¾ƒå¤§", "å®Œå…¨ä¸åŒ"], weight: [90, 85, 70, 60] },
                { question: "ä½ ä»¬çš„ç†æƒ³çº¦ä¼šæ˜¯ï¼Ÿ", options: ["æµªæ¼«æ™šé¤", "æˆ·å¤–æ´»åŠ¨", "å®…å®¶ä¼‘é—²", "æ¢ç´¢æ–°äº‹ç‰©"], weight: [90, 85, 80, 95] },
                { question: "ä½ ä»¬å¯¹å¿ è¯šçš„çœ‹æ³•ï¼Ÿ", options: ["ç»å¯¹å¿ è¯š", "ä¿¡ä»»æœ€é‡è¦", "éœ€è¦çº¦æŸ", "é¡ºå…¶è‡ªç„¶"], weight: [100, 95, 80, 70] },
                { question: "ä½ ä»¬çš„æ„Ÿæƒ…å‘å±•é€Ÿåº¦ï¼Ÿ", options: ["è¿…é€Ÿå‡æ¸©", "å¾ªåºæ¸è¿›", "æ—¶å¿«æ—¶æ…¢", "æ¯”è¾ƒç¼“æ…¢"], weight: [80, 100, 85, 75] },
                { question: "ä½ ä»¬è§£å†³é—®é¢˜çš„æ–¹å¼ï¼Ÿ", options: ["ç†æ€§åˆ†æ", "æ„Ÿæ€§å¤„ç†", "å…±åŒå•†é‡", "äº¤ç»™æ—¶é—´"], weight: [85, 75, 100, 70] },
                { question: "ä½ ä»¬å¯¹ä»ªå¼æ„Ÿçš„é‡è§†ç¨‹åº¦ï¼Ÿ", options: ["éå¸¸é‡è§†", "ä¸€èˆ¬é‡è§†", "ä¸å¤ªåœ¨æ„", "çœ‹å¿ƒæƒ…"], weight: [90, 85, 75, 80] },
                { question: "ä½ ä»¬çš„æœªæ¥ç›®æ ‡ï¼Ÿ", options: ["äº‹ä¸šä¸ºå…ˆ", "å®¶åº­ä¸ºé‡", "å¹³è¡¡å‘å±•", "äº«å—å½“ä¸‹"], weight: [70, 90, 100, 80] },
                { question: "ä½ ä»¬çœ¼ä¸­å¯¹æ–¹çš„ä¼˜ç‚¹ï¼Ÿ", options: ["æ€§æ ¼å¥½", "èƒ½åŠ›å¼º", "ä¸‰è§‚æ­£", "ç›¸å¤„èˆ’æœ"], weight: [95, 90, 100, 95] },
                { question: "ä½ ä»¬çš„çˆ±æƒ…ä¿é²œç§˜è¯€ï¼Ÿ", options: ["ç»å¸¸æ²Ÿé€š", "åˆ¶é€ æƒŠå–œ", "ä¿æŒç‹¬ç«‹", "å…±åŒæˆé•¿"], weight: [90, 85, 80, 100] },
                { question: "ä½ ä»¬å¦‚ä½•åº†ç¥çºªå¿µæ—¥ï¼Ÿ", options: ["ç²¾å¿ƒå‡†å¤‡", "ç®€å•åº†ç¥", "äº’ç›¸é™ªä¼´", "ä¸å¤ªåœ¨æ„"], weight: [95, 90, 85, 70] },
                { question: "ä½ ä»¬å¯¹å¼‚åœ°æ‹çš„çœ‹æ³•ï¼Ÿ", options: ["åšå†³åå¯¹", "å¯ä»¥æ¥å—", "è€ƒéªŒæ„Ÿæƒ…", "éšç¼˜"], weight: [70, 90, 85, 75] },
                { question: "ä½ ä»¬çš„æ¶ˆè´¹ä¹ æƒ¯ï¼Ÿ", options: ["éƒ½å¾ˆèŠ‚ä¿­", "éƒ½çˆ±æ¶ˆè´¹", "äº’è¡¥å‹", "å„è‡ªç‹¬ç«‹"], weight: [85, 70, 100, 80] },
                { question: "ä½ ä»¬çš„ä½œæ¯æ—¶é—´ï¼Ÿ", options: ["å®Œå…¨åŒæ­¥", "åŸºæœ¬åŒæ­¥", "å·®å¼‚è¾ƒå¤§", "å®Œå…¨ç›¸å"], weight: [90, 95, 75, 60] },
                { question: "ä½ ä»¬çš„ç¤¾äº¤åœˆï¼Ÿ", options: ["å®Œå…¨èåˆ", "éƒ¨åˆ†é‡å ", "å„è‡ªç‹¬ç«‹", "äº’ä¸å¹²æ¶‰"], weight: [85, 95, 75, 65] },
                { question: "ä½ ä»¬çš„å¹½é»˜æ„Ÿï¼Ÿ", options: ["å®Œå…¨ä¸€è‡´", "åŸºæœ¬ç›¸åŒ", "å·®å¼‚è¾ƒå¤§", "äº’ä¸ç†è§£"], weight: [100, 90, 70, 60] },
                { question: "ä½ ä»¬çš„å†³ç­–æ–¹å¼ï¼Ÿ", options: ["å…±åŒå†³å®š", "ä¸€æ–¹ä¸»å¯¼", "è½®æµåšä¸»", "éšç¼˜"], weight: [95, 80, 85, 70] },
                { question: "ä½ ä»¬çš„è¡¨è¾¾çˆ±çš„æ–¹å¼ï¼Ÿ", options: ["è¨€è¯­è¡¨è¾¾", "å®é™…è¡ŒåŠ¨", "ç¤¼ç‰©é¦ˆèµ ", "é»˜é»˜ä»˜å‡º"], weight: [85, 95, 80, 85] },
                { question: "ä½ ä»¬çš„å†²çªå¤„ç†ï¼Ÿ", options: ["ç«‹å³è§£å†³", "å†·é™åå¤„ç†", "å›é¿é—®é¢˜", "å¯»æ±‚å¸®åŠ©"], weight: [90, 100, 65, 80] }
            ];

            const questionTypes = [
                { prefix: "å…³äº", suffix: "ï¼Œä½ ä»¬çš„çœ‹æ³•æ˜¯ï¼Ÿ" },
                { prefix: "å½“é‡åˆ°", suffix: "æ—¶ï¼Œä½ ä»¬ä¼šï¼Ÿ" },
                { prefix: "å¯¹äº", suffix: "ï¼Œä½ ä»¬çš„æ€åº¦æ˜¯ï¼Ÿ" },
                { prefix: "åœ¨", suffix: "æ–¹é¢ï¼Œä½ ä»¬çš„è¡¨ç°æ˜¯ï¼Ÿ" },
                { prefix: "é¢å¯¹", suffix: "ï¼Œä½ ä»¬çš„ååº”æ˜¯ï¼Ÿ" }
            ];

            const topics = [
                "é‡‘é’±ç®¡ç†", "å®¶åº­è´£ä»»", "ä¼‘é—²å¨±ä¹", "ç¤¾äº¤æ´»åŠ¨", "èŒä¸šå‘å±•", 
                "ä¸ªäººæˆé•¿", "å¥åº·ç”Ÿæ´»", "æ—…è¡Œè®¡åˆ’", "èŠ‚æ—¥åº†ç¥", "å®¶åŠ¡åˆ†å·¥",
                "å­å¥³æ•™è‚²", "å® ç‰©é¥²å…»", "é¥®é£Ÿä¹ æƒ¯", "ç¡çœ ä¹ æƒ¯", "è¿åŠ¨å¥èº«",
                "é˜…è¯»å­¦ä¹ ", "éŸ³ä¹å“å‘³", "ç”µå½±åå¥½", "è‰ºæœ¯æ¬£èµ", "è´­ç‰©æ¶ˆè´¹",
                "æŠ•èµ„ç†è´¢", "æ…ˆå–„å…¬ç›Š", "ç¯å¢ƒä¿æŠ¤", "æ”¿æ²»è§‚ç‚¹", "å®—æ•™ä¿¡ä»°",
                "ç§‘æŠ€äº§å“", "æ—¶å°šæ½®æµ", "äººé™…å…³ç³»", "æƒ…ç»ªç®¡ç†", "æ—¶é—´è§„åˆ’"
            ];

            const optionsTemplates = [
                ["å®Œå…¨ä¸€è‡´", "åŸºæœ¬ä¸€è‡´", "æœ‰åˆ†æ­§ä½†å¯åè°ƒ", "å·®å¼‚è¾ƒå¤§"],
                ["éƒ½éå¸¸é‡è§†", "ä¸€æ–¹æ›´é‡è§†", "éƒ½ä¸å¤ªåœ¨æ„", "éšç¼˜"],
                ["ç»å¸¸ä¸€èµ·", "å¶å°”ä¸€èµ·", "å„è‡ªç‹¬ç«‹", "çœ‹æƒ…å†µ"],
                ["é«˜åº¦å¥‘åˆ", "æ¯”è¾ƒå¥‘åˆ", "éƒ¨åˆ†å¥‘åˆ", "ä¸å¤ªå¥‘åˆ"],
                ["ç§¯ææ²Ÿé€š", "å†·é™å¤„ç†", "å›é¿é—®é¢˜", "å¯»æ±‚å¸®åŠ©"]
            ];

            const weightTemplates = [
                [100, 90, 75, 60],
                [95, 85, 70, 65],
                [90, 95, 80, 70],
                [85, 90, 80, 75],
                [80, 85, 90, 70]
            ];

            let fullQuizBank = [...baseQuestions];
            
            // ç”Ÿæˆæ›´å¤šé¢˜ç›®ä»¥è¾¾åˆ°500+
            while (fullQuizBank.length < 520) {
                const type = questionTypes[Math.floor(Math.random() * questionTypes.length)];
                const topic = topics[Math.floor(Math.random() * topics.length)];
                const optionsTemplate = optionsTemplates[Math.floor(Math.random() * optionsTemplates.length)];
                const weightTemplate = weightTemplates[Math.floor(Math.random() * weightTemplates.length)];
                
                fullQuizBank.push({
                    question: `${type.prefix}${topic}${type.suffix}`,
                    options: [...optionsTemplate],
                    weight: [...weightTemplate]
                });
            }
            
            return fullQuizBank;
        };

        // ç”Ÿæˆ500+é¢˜åº“
        const fullQuizBank = generateQuestionBank();

        // å…¨å±€å˜é‡
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let userInfo = {};
        let quizQuestions = [];
    </script>
</body>
</html>